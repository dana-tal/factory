{"error":{"errorLabelSet":{},"reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"localhost:27017":{"$clusterTime":null,"address":"localhost:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":877486722,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Single"}},"level":"error","message":"getAllDepartments failed:","timestamp":"2025-06-03T10:27:51.868Z"}
2025-06-03 13:34:34 [ERROR]: getAllDepartments failed:
2025-06-03 13:58:36 [ERROR]: getAllDepartments failed: connect ECONNREFUSED ::1:27017, connect ECONNREFUSED 127.0.0.1:27017
MongoServerSelectionError: connect ECONNREFUSED ::1:27017, connect ECONNREFUSED 127.0.0.1:27017
    at Topology.selectServer (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\sdam\topology.js:321:38)
    at async tryOperation (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\operations\execute_operation.js:145:18)
    at async executeOperation (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\operations\execute_operation.js:75:16)
    at async FindCursor._initialize (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\cursor\find_cursor.js:61:26)
    at async FindCursor.cursorInit (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\cursor\abstract_cursor.js:633:27)
    at async FindCursor.fetchBatch (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\cursor\abstract_cursor.js:667:13)
    at async FindCursor.next (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\cursor\abstract_cursor.js:347:17)
    at async [Symbol.asyncIterator] (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\cursor\abstract_cursor.js:255:34)
    at async FindCursor.toArray (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\cursor\abstract_cursor.js:427:26)
    at async model.Query._find (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\query.js:2407:14)
2025-06-03 17:31:45 [ERROR]: getAllDepartments failed: Schema hasn't been registered for model "employee".
Use mongoose.model(name, schema)
MissingSchemaError: Schema hasn't been registered for model "employee".
Use mongoose.model(name, schema)
    at NativeConnection.model (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\connection.js:1491:13)
    at _getModelFromConn (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\helpers\populate\getModelsMapForPopulate.js:579:15)
    at addModelNamesToMap (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\helpers\populate\getModelsMapForPopulate.js:507:17)
    at _virtualPopulate (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\helpers\populate\getModelsMapForPopulate.js:464:7)
    at getModelsMapForPopulate (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\helpers\populate\getModelsMapForPopulate.js:42:12)
    at _populatePath (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\model.js:4439:21)
    at Function.populate (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\model.js:4406:21)
    at model.Query._find (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\query.js:2433:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async model.Query.exec (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\query.js:4604:63)
2025-06-03 17:32:32 [ERROR]: getAllDepartments failed: Schema hasn't been registered for model "employee".
Use mongoose.model(name, schema)
MissingSchemaError: Schema hasn't been registered for model "employee".
Use mongoose.model(name, schema)
    at NativeConnection.model (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\connection.js:1491:13)
    at _getModelFromConn (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\helpers\populate\getModelsMapForPopulate.js:579:15)
    at addModelNamesToMap (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\helpers\populate\getModelsMapForPopulate.js:507:17)
    at _virtualPopulate (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\helpers\populate\getModelsMapForPopulate.js:464:7)
    at getModelsMapForPopulate (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\helpers\populate\getModelsMapForPopulate.js:42:12)
    at _populatePath (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\model.js:4439:21)
    at Function.populate (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\model.js:4406:21)
    at model.Query._find (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\query.js:2433:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async model.Query.exec (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\query.js:4604:63)
2025-06-03 17:35:00 [ERROR]: getAllDepartments failed: Schema hasn't been registered for model "employee".
Use mongoose.model(name, schema)
MissingSchemaError: Schema hasn't been registered for model "employee".
Use mongoose.model(name, schema)
    at NativeConnection.model (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\connection.js:1491:13)
    at _getModelFromConn (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\helpers\populate\getModelsMapForPopulate.js:579:15)
    at addModelNamesToMap (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\helpers\populate\getModelsMapForPopulate.js:507:17)
    at _virtualPopulate (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\helpers\populate\getModelsMapForPopulate.js:464:7)
    at getModelsMapForPopulate (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\helpers\populate\getModelsMapForPopulate.js:42:12)
    at _populatePath (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\model.js:4439:21)
    at Function.populate (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\model.js:4406:21)
    at model.Query._find (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\query.js:2433:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async model.Query.exec (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\query.js:4604:63)
2025-06-03 17:58:22 [ERROR]: getAllDepartments failed: Cannot do exclusion on field departmentId in inclusion projection
MongoServerError: Cannot do exclusion on field departmentId in inclusion projection
    at Connection.sendCommand (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\cmap\connection.js:299:27)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Connection.command (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\cmap\connection.js:327:26)
    at async Server.command (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\sdam\server.js:168:29)
    at async FindOperation.execute (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\operations\find.js:36:16)
    at async tryOperation (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\operations\execute_operation.js:207:20)
    at async executeOperation (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\operations\execute_operation.js:75:16)
    at async FindCursor._initialize (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\cursor\find_cursor.js:61:26)
    at async FindCursor.cursorInit (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\cursor\abstract_cursor.js:633:27)
    at async FindCursor.fetchBatch (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\cursor\abstract_cursor.js:667:13)
2025-06-04 12:26:50 [ERROR]: addDepartment failed: existDepartment is not defined
ReferenceError: existDepartment is not defined
    at addDepartment (C:\dana\yaniv-arad\final_projects\factory\server\controllers\departmentsController.js:66:9)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-06-04 13:23:14 [ERROR]: addDepartment failed: Cast to ObjectId failed for value "50" (type number) at path "_id" for model "employee"
CastError: Cast to ObjectId failed for value "50" (type number) at path "_id" for model "employee"
    at SchemaObjectId.cast (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\schema\objectId.js:251:11)
    at SchemaType.applySetters (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\schemaType.js:1255:12)
    at SchemaType.castForQuery (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\schemaType.js:1673:17)
    at cast (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\cast.js:390:32)
    at Query.cast (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\query.js:5055:12)
    at Query._castConditions (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\query.js:2351:10)
    at model.Query._findOne (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\query.js:2674:8)
    at model.Query.exec (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongoose\lib\query.js:4604:80)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async addDepartment (C:\dana\yaniv-arad\final_projects\factory\server\controllers\departmentsController.js:59:25)
2025-06-04 17:51:52 [ERROR]: getDepartmentsNames failed: Cannot do exclusion on field managerId in inclusion projection
MongoServerError: Cannot do exclusion on field managerId in inclusion projection
    at Connection.sendCommand (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\cmap\connection.js:299:27)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Connection.command (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\cmap\connection.js:327:26)
    at async Server.command (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\sdam\server.js:168:29)
    at async FindOperation.execute (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\operations\find.js:36:16)
    at async tryOperation (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\operations\execute_operation.js:207:20)
    at async executeOperation (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\operations\execute_operation.js:75:16)
    at async FindCursor._initialize (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\cursor\find_cursor.js:61:26)
    at async FindCursor.cursorInit (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\cursor\abstract_cursor.js:633:27)
    at async FindCursor.fetchBatch (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\mongodb\lib\cursor\abstract_cursor.js:667:13)
2025-06-05 16:44:28 [ERROR]: updateDepartment failed: Converting circular structure to JSON
    --> starting at object with constructor 'MongoClient'
    |     property 's' -> object with constructor 'Object'
    |     property 'sessionPool' -> object with constructor 'ServerSessionPool'
    --- property 'client' closes the circle
TypeError: Converting circular structure to JSON
    --> starting at object with constructor 'MongoClient'
    |     property 's' -> object with constructor 'Object'
    |     property 'sessionPool' -> object with constructor 'ServerSessionPool'
    --- property 'client' closes the circle
    at JSON.stringify (<anonymous>)
    at stringify (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:1020:12)
    at ServerResponse.json (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:243:14)
    at updateDepartment (C:\dana\yaniv-arad\final_projects\factory\server\controllers\departmentsController.js:115:34)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at next (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:157:13)
    at Route.dispatch (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:117:3)
    at handle (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:435:11)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:295:15
2025-06-05 16:45:07 [ERROR]: updateDepartment failed: Converting circular structure to JSON
    --> starting at object with constructor 'MongoClient'
    |     property 's' -> object with constructor 'Object'
    |     property 'sessionPool' -> object with constructor 'ServerSessionPool'
    --- property 'client' closes the circle
TypeError: Converting circular structure to JSON
    --> starting at object with constructor 'MongoClient'
    |     property 's' -> object with constructor 'Object'
    |     property 'sessionPool' -> object with constructor 'ServerSessionPool'
    --- property 'client' closes the circle
    at JSON.stringify (<anonymous>)
    at stringify (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:1020:12)
    at ServerResponse.json (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:243:14)
    at updateDepartment (C:\dana\yaniv-arad\final_projects\factory\server\controllers\departmentsController.js:115:34)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at next (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:157:13)
    at Route.dispatch (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:117:3)
    at handle (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:435:11)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:295:15
2025-06-05 16:46:26 [ERROR]: updateDepartment failed: Converting circular structure to JSON
    --> starting at object with constructor 'MongoClient'
    |     property 's' -> object with constructor 'Object'
    |     property 'sessionPool' -> object with constructor 'ServerSessionPool'
    --- property 'client' closes the circle
TypeError: Converting circular structure to JSON
    --> starting at object with constructor 'MongoClient'
    |     property 's' -> object with constructor 'Object'
    |     property 'sessionPool' -> object with constructor 'ServerSessionPool'
    --- property 'client' closes the circle
    at JSON.stringify (<anonymous>)
    at stringify (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:1020:12)
    at ServerResponse.json (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:243:14)
    at updateDepartment (C:\dana\yaniv-arad\final_projects\factory\server\controllers\departmentsController.js:115:34)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at next (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:157:13)
    at Route.dispatch (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:117:3)
    at handle (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:435:11)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:295:15
2025-06-05 16:48:50 [ERROR]: updateDepartment failed: Converting circular structure to JSON
    --> starting at object with constructor 'MongoClient'
    |     property 's' -> object with constructor 'Object'
    |     property 'sessionPool' -> object with constructor 'ServerSessionPool'
    --- property 'client' closes the circle
TypeError: Converting circular structure to JSON
    --> starting at object with constructor 'MongoClient'
    |     property 's' -> object with constructor 'Object'
    |     property 'sessionPool' -> object with constructor 'ServerSessionPool'
    --- property 'client' closes the circle
    at JSON.stringify (<anonymous>)
    at stringify (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:1020:12)
    at ServerResponse.json (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:243:14)
    at updateDepartment (C:\dana\yaniv-arad\final_projects\factory\server\controllers\departmentsController.js:115:34)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at next (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:157:13)
    at Route.dispatch (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:117:3)
    at handle (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:435:11)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:295:15
2025-06-05 16:49:00 [ERROR]: updateDepartment failed: Converting circular structure to JSON
    --> starting at object with constructor 'MongoClient'
    |     property 's' -> object with constructor 'Object'
    |     property 'sessionPool' -> object with constructor 'ServerSessionPool'
    --- property 'client' closes the circle
TypeError: Converting circular structure to JSON
    --> starting at object with constructor 'MongoClient'
    |     property 's' -> object with constructor 'Object'
    |     property 'sessionPool' -> object with constructor 'ServerSessionPool'
    --- property 'client' closes the circle
    at JSON.stringify (<anonymous>)
    at stringify (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:1020:12)
    at ServerResponse.json (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:243:14)
    at updateDepartment (C:\dana\yaniv-arad\final_projects\factory\server\controllers\departmentsController.js:115:34)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at next (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:157:13)
    at Route.dispatch (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:117:3)
    at handle (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:435:11)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:295:15
2025-06-05 16:50:40 [ERROR]: updateDepartment failed: Converting circular structure to JSON
    --> starting at object with constructor 'MongoClient'
    |     property 's' -> object with constructor 'Object'
    |     property 'sessionPool' -> object with constructor 'ServerSessionPool'
    --- property 'client' closes the circle
TypeError: Converting circular structure to JSON
    --> starting at object with constructor 'MongoClient'
    |     property 's' -> object with constructor 'Object'
    |     property 'sessionPool' -> object with constructor 'ServerSessionPool'
    --- property 'client' closes the circle
    at JSON.stringify (<anonymous>)
    at stringify (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:1020:12)
    at ServerResponse.json (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:243:14)
    at updateDepartment (C:\dana\yaniv-arad\final_projects\factory\server\controllers\departmentsController.js:115:34)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at next (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:157:13)
    at Route.dispatch (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:117:3)
    at handle (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:435:11)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:295:15
2025-06-05 17:00:58 [ERROR]: updateDepartment failed: Invalid status code: undefined. Status code must be an integer.
TypeError: Invalid status code: undefined. Status code must be an integer.
    at ServerResponse.status (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:65:11)
    at updateDepartment (C:\dana\yaniv-arad\final_projects\factory\server\controllers\departmentsController.js:116:26)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at next (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:157:13)
    at Route.dispatch (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:117:3)
    at handle (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:435:11)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:295:15
    at param (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:600:14)
    at param (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:610:14)
2025-06-05 17:01:41 [ERROR]: updateDepartment failed: Invalid status code: undefined. Status code must be an integer.
TypeError: Invalid status code: undefined. Status code must be an integer.
    at ServerResponse.status (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:65:11)
    at updateDepartment (C:\dana\yaniv-arad\final_projects\factory\server\controllers\departmentsController.js:116:26)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at next (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:157:13)
    at Route.dispatch (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:117:3)
    at handle (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:435:11)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:295:15
    at param (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:600:14)
    at param (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:610:14)
2025-06-05 17:03:22 [ERROR]: updateDepartment failed: Invalid status code: undefined. Status code must be an integer.
TypeError: Invalid status code: undefined. Status code must be an integer.
    at ServerResponse.status (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:65:11)
    at updateDepartment (C:\dana\yaniv-arad\final_projects\factory\server\controllers\departmentsController.js:117:26)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at next (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:157:13)
    at Route.dispatch (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:117:3)
    at handle (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:435:11)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:295:15
    at param (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:600:14)
    at param (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:610:14)
2025-06-05 17:10:41 [ERROR]: updateDepartment failed: Converting circular structure to JSON
    --> starting at object with constructor 'MongoClient'
    |     property 's' -> object with constructor 'Object'
    |     property 'sessionPool' -> object with constructor 'ServerSessionPool'
    --- property 'client' closes the circle
TypeError: Converting circular structure to JSON
    --> starting at object with constructor 'MongoClient'
    |     property 's' -> object with constructor 'Object'
    |     property 'sessionPool' -> object with constructor 'ServerSessionPool'
    --- property 'client' closes the circle
    at JSON.stringify (<anonymous>)
    at stringify (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:1020:12)
    at ServerResponse.json (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:243:14)
    at updateDepartment (C:\dana\yaniv-arad\final_projects\factory\server\controllers\departmentsController.js:120:34)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-06-05 17:14:44 [ERROR]: updateDepartment failed: Converting circular structure to JSON
    --> starting at object with constructor 'MongoClient'
    |     property 's' -> object with constructor 'Object'
    |     property 'sessionPool' -> object with constructor 'ServerSessionPool'
    --- property 'client' closes the circle
TypeError: Converting circular structure to JSON
    --> starting at object with constructor 'MongoClient'
    |     property 's' -> object with constructor 'Object'
    |     property 'sessionPool' -> object with constructor 'ServerSessionPool'
    --- property 'client' closes the circle
    at JSON.stringify (<anonymous>)
    at stringify (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:1020:12)
    at ServerResponse.json (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:243:14)
    at updateDepartment (C:\dana\yaniv-arad\final_projects\factory\server\controllers\departmentsController.js:120:34)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-06-07 14:48:57 [ERROR]: deleteDepartment failed: Invalid status code: undefined. Status code must be an integer.
TypeError: Invalid status code: undefined. Status code must be an integer.
    at ServerResponse.status (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:65:11)
    at deleteDepartment (C:\dana\yaniv-arad\final_projects\factory\server\controllers\departmentsController.js:122:24)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at next (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:157:13)
    at Route.dispatch (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:117:3)
    at handle (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:435:11)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:295:15
    at param (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:600:14)
    at param (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:610:14)
2025-06-07 14:50:26 [ERROR]: deleteDepartment failed: Invalid status code: undefined. Status code must be an integer.
TypeError: Invalid status code: undefined. Status code must be an integer.
    at ServerResponse.status (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:65:11)
    at deleteDepartment (C:\dana\yaniv-arad\final_projects\factory\server\controllers\departmentsController.js:122:24)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at next (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:157:13)
    at Route.dispatch (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:117:3)
    at handle (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:435:11)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:295:15
    at param (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:600:14)
    at param (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:610:14)
2025-06-07 14:52:45 [ERROR]: deleteDepartment failed: Invalid status code: undefined. Status code must be an integer.
TypeError: Invalid status code: undefined. Status code must be an integer.
    at ServerResponse.status (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\express\lib\response.js:65:11)
    at deleteDepartment (C:\dana\yaniv-arad\final_projects\factory\server\controllers\departmentsController.js:124:24)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at next (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:157:13)
    at Route.dispatch (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\route.js:117:3)
    at handle (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:435:11)
    at Layer.handleRequest (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\lib\layer.js:152:17)
    at C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:295:15
    at param (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:600:14)
    at param (C:\dana\yaniv-arad\final_projects\factory\server\node_modules\router\index.js:610:14)
